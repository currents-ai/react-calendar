{"version":3,"file":"index.esm.js","sources":["../src/constants.ts","../node_modules/tslib/tslib.es6.js","../node_modules/clsx/dist/clsx.mjs","../src/lib/utils.ts","../src/utils.ts","../src/event-item.tsx","../src/agenda-view.tsx","../src/calendar-dnd-context.tsx","../src/draggable-event.tsx","../src/droppable-cell.tsx","../src/hooks/use-current-time-indicator.ts","../src/day-view.tsx","../src/hooks/use-event-visibility.ts","../src/ui/popover.tsx","../src/month-view.tsx","../src/ui/button.tsx","../src/ui/dropdown-menu.tsx","../src/week-view.tsx","../src/event-calendar.tsx"],"sourcesContent":["export const EventHeight = 24\n\n// Vertical gap between events in pixels - controls spacing in month view\nexport const EventGap = 4\n\n// Height of hour cells in week and day views - controls the scale of time display\nexport const WeekCellsHeight = 72\n\n// Number of days to show in the agenda view\nexport const AgendaDaysToShow = 30\n\n// Start and end hours for the week and day views\nexport const StartHour = 0\nexport const EndHour = 24\n\n// Default start and end times\nexport const DefaultStartHour = 9 // 9 AM\nexport const DefaultEndHour = 10 // 10 AM\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nvar ownKeys = function(o) {\r\n    ownKeys = Object.getOwnPropertyNames || function (o) {\r\n        var ar = [];\r\n        for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\r\n        return ar;\r\n    };\r\n    return ownKeys(o);\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    var r, s = 0;\r\n    function next() {\r\n        while (r = env.stack.pop()) {\r\n            try {\r\n                if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\r\n                if (r.dispose) {\r\n                    var result = r.dispose.call(r.value);\r\n                    if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n                }\r\n                else s |= 1;\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\r\n    if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\r\n        return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\r\n            return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\r\n        });\r\n    }\r\n    return path;\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __esDecorate: __esDecorate,\r\n    __runInitializers: __runInitializers,\r\n    __propKey: __propKey,\r\n    __setFunctionName: __setFunctionName,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n    __rewriteRelativeImportExtension: __rewriteRelativeImportExtension,\r\n};\r\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","import { isSameDay } from \"date-fns\"\n\nimport type { CalendarEvent, EventColor } from \"./types\"\n\n/**\n * Get CSS classes for event colors\n */\nexport function getEventColorClasses(color?: EventColor | string): string {\n  const eventColor = color || \"sky\"\n\n  switch (eventColor) {\n    case \"sky\":\n      return \"bg-sky-200/50 hover:bg-sky-200/40 text-sky-950/80 dark:bg-sky-400/25 dark:hover:bg-sky-400/20 dark:text-sky-200 shadow-sky-700/8\"\n    case \"amber\":\n      return \"bg-amber-200/50 hover:bg-amber-200/40 text-amber-950/80 dark:bg-amber-400/25 dark:hover:bg-amber-400/20 dark:text-amber-200 shadow-amber-700/8\"\n    case \"violet\":\n      return \"bg-violet-200/50 hover:bg-violet-200/40 text-violet-950/80 dark:bg-violet-400/25 dark:hover:bg-violet-400/20 dark:text-violet-200 shadow-violet-700/8\"\n    case \"rose\":\n      return \"bg-rose-200/50 hover:bg-rose-200/40 text-rose-950/80 dark:bg-rose-400/25 dark:hover:bg-rose-400/20 dark:text-rose-200 shadow-rose-700/8\"\n    case \"emerald\":\n      return \"bg-emerald-200/50 hover:bg-emerald-200/40 text-emerald-950/80 dark:bg-emerald-400/25 dark:hover:bg-emerald-400/20 dark:text-emerald-200 shadow-emerald-700/8\"\n    case \"orange\":\n      return \"bg-orange-200/50 hover:bg-orange-200/40 text-orange-950/80 dark:bg-orange-400/25 dark:hover:bg-orange-400/20 dark:text-orange-200 shadow-orange-700/8\"\n    case \"gray\":\n      return \"text-zinc-700 bg-zinc-100 dark:bg-zinc-900 dark:text-zinc-400\"\n    case \"black\":\n      return \"bg-black text-gray-400\"\n    case \"green\":\n      return \"bg-green-500/20 dark:bg-green-500/30 text-green-800 dark:text-green-400\"\n    case \"green-dark\":\n      return \"bg-green-100 dark:bg-emerald-600 dark:bg-opacity-70 text-green-800 dark:text-white\"\n    case \"red\":\n      return \"bg-red-500/20 dark:bg-red-500/30 text-red-700 dark:text-red-500 \"\n    case \"red-light\":\n      return \"bg-red-400 bg-opacity-10 text-red-500\"\n    case \"blue\":\n      return \"bg-blue-100  dark:bg-blue-500 text-highlight dark:text-blue-100\"\n    case \"yellow\":\n      return \"bg-yellow-500/20 dark:bg-yellow-500/30 text-yellow-700 dark:text-yellow-400\"\n    default:\n      return \"bg-sky-200/50 hover:bg-sky-200/40 text-sky-950/80 dark:bg-sky-400/25 dark:hover:bg-sky-400/20 dark:text-sky-200 shadow-sky-700/8\"\n  }\n}\n\n/**\n * Get CSS classes for border radius based on event position in multi-day events\n */\nexport function getBorderRadiusClasses(\n  isFirstDay: boolean,\n  isLastDay: boolean\n): string {\n  if (isFirstDay && isLastDay) {\n    return \"rounded\" // Both ends rounded\n  } else if (isFirstDay) {\n    return \"rounded-l rounded-r-none\" // Only left end rounded\n  } else if (isLastDay) {\n    return \"rounded-r rounded-l-none\" // Only right end rounded\n  } else {\n    return \"rounded-none\" // No rounded corners\n  }\n}\n\n/**\n * Check if an event is a multi-day event\n */\nexport function isMultiDayEvent(event: CalendarEvent): boolean {\n  const eventStart = new Date(event.start)\n  const eventEnd = new Date(event.end)\n  return event.allDay || eventStart.getDate() !== eventEnd.getDate()\n}\n\n/**\n * Filter events for a specific day\n */\nexport function getEventsForDay(\n  events: CalendarEvent[],\n  day: Date\n): CalendarEvent[] {\n  return events\n    .filter((event) => {\n      const eventStart = new Date(event.start)\n      return isSameDay(day, eventStart)\n    })\n    .sort((a, b) => new Date(a.start).getTime() - new Date(b.start).getTime())\n}\n\n/**\n * Sort events with multi-day events first, then by start time\n */\nexport function sortEvents(events: CalendarEvent[]): CalendarEvent[] {\n  return [...events].sort((a, b) => {\n    const aIsMultiDay = isMultiDayEvent(a)\n    const bIsMultiDay = isMultiDayEvent(b)\n\n    if (aIsMultiDay && !bIsMultiDay) return -1\n    if (!aIsMultiDay && bIsMultiDay) return 1\n\n    return new Date(a.start).getTime() - new Date(b.start).getTime()\n  })\n}\n\n/**\n * Get multi-day events that span across a specific day (but don't start on that day)\n */\nexport function getSpanningEventsForDay(\n  events: CalendarEvent[],\n  day: Date\n): CalendarEvent[] {\n  return events.filter((event) => {\n    if (!isMultiDayEvent(event)) return false\n\n    const eventStart = new Date(event.start)\n    const eventEnd = new Date(event.end)\n\n    // Only include if it's not the start day but is either the end day or a middle day\n    return (\n      !isSameDay(day, eventStart) &&\n      (isSameDay(day, eventEnd) || (day > eventStart && day < eventEnd))\n    )\n  })\n}\n\n/**\n * Get all events visible on a specific day (starting, ending, or spanning)\n */\nexport function getAllEventsForDay(\n  events: CalendarEvent[],\n  day: Date\n): CalendarEvent[] {\n  return events.filter((event) => {\n    const eventStart = new Date(event.start)\n    const eventEnd = new Date(event.end)\n    return (\n      isSameDay(day, eventStart) ||\n      isSameDay(day, eventEnd) ||\n      (day > eventStart && day < eventEnd)\n    )\n  })\n}\n\n/**\n * Get all events for a day (for agenda view)\n */\nexport function getAgendaEventsForDay(\n  events: CalendarEvent[],\n  day: Date\n): CalendarEvent[] {\n  return events\n    .filter((event) => {\n      const eventStart = new Date(event.start)\n      const eventEnd = new Date(event.end)\n      return (\n        isSameDay(day, eventStart) ||\n        isSameDay(day, eventEnd) ||\n        (day > eventStart && day < eventEnd)\n      )\n    })\n    .sort((a, b) => new Date(a.start).getTime() - new Date(b.start).getTime())\n}\n","import { useMemo } from \"react\"\nimport type { DraggableAttributes } from \"@dnd-kit/core\"\nimport type { SyntheticListenerMap } from \"@dnd-kit/core/dist/hooks/utilities\"\nimport { differenceInMinutes, format, getMinutes, isPast } from \"date-fns\"\n\nimport { cn } from \"./lib/utils\"\nimport { CalendarEvent } from \"./types\"\nimport { getBorderRadiusClasses, getEventColorClasses } from \"./utils\"\n\n// Using date-fns format with custom formatting:\n// 'h' - hours (1-12)\n// 'a' - am/pm\n// ':mm' - minutes with leading zero (only if the token 'mm' is present)\nconst formatTimeWithOptionalMinutes = (date: Date) => {\n  return format(date, getMinutes(date) === 0 ? \"ha\" : \"h:mma\").toLowerCase()\n}\n\ninterface EventWrapperProps {\n  event: CalendarEvent\n  isFirstDay?: boolean\n  isLastDay?: boolean\n  isDragging?: boolean\n  onClick?: (e: React.MouseEvent) => void\n  className?: string\n  children: React.ReactNode\n  currentTime?: Date\n  dndListeners?: SyntheticListenerMap\n  dndAttributes?: DraggableAttributes\n  onMouseDown?: (e: React.MouseEvent) => void\n  onTouchStart?: (e: React.TouchEvent) => void\n}\n\n// Shared wrapper component for event styling\nfunction EventWrapper({\n  event,\n  isFirstDay = true,\n  isLastDay = true,\n  isDragging,\n  onClick,\n  className,\n  children,\n  currentTime,\n  dndListeners,\n  dndAttributes,\n  onMouseDown,\n  onTouchStart,\n}: EventWrapperProps) {\n  // Always use the currentTime (if provided) to determine if the event is in the past\n  const displayEnd = currentTime\n    ? new Date(\n        new Date(currentTime).getTime() +\n          (new Date(event.end).getTime() - new Date(event.start).getTime())\n      )\n    : new Date(event.end)\n\n  const isEventInPast = isPast(displayEnd)\n\n  return (\n    <button\n      className={cn(\n        \"focus-visible:border-ring focus-visible:ring-ring/50 overflow-wrap flex h-full w-full px-1 text-left font-medium backdrop-blur-md transition outline-none select-none focus-visible:ring-[3px] [&[data-dragging]]:cursor-grabbing [&[data-dragging]]:shadow-lg [&[data-past-event]]:line-through sm:px-2\",\n        getEventColorClasses(event.color),\n        getBorderRadiusClasses(isFirstDay, isLastDay),\n        className\n      )}\n      data-dragging={isDragging || undefined}\n      data-past-event={isEventInPast || undefined}\n      onClick={onClick}\n      onMouseDown={onMouseDown}\n      onTouchStart={onTouchStart}\n      {...dndListeners}\n      {...dndAttributes}\n    >\n      {children}\n    </button>\n  )\n}\n\ninterface EventItemProps {\n  event: CalendarEvent\n  view: \"month\" | \"week\" | \"day\" | \"agenda\"\n  isDragging?: boolean\n  onClick?: (e: React.MouseEvent) => void\n  showTime?: boolean\n  currentTime?: Date // For updating time during drag\n  isFirstDay?: boolean\n  isLastDay?: boolean\n  children?: React.ReactNode\n  className?: string\n  dndListeners?: SyntheticListenerMap\n  dndAttributes?: DraggableAttributes\n  onMouseDown?: (e: React.MouseEvent) => void\n  onTouchStart?: (e: React.TouchEvent) => void\n}\n\nexport function EventItem({\n  event,\n  view,\n  isDragging,\n  onClick,\n  showTime,\n  currentTime,\n  isFirstDay = true,\n  isLastDay = true,\n  children,\n  className,\n  dndListeners,\n  dndAttributes,\n  onMouseDown,\n  onTouchStart,\n}: EventItemProps) {\n  const eventColor = event.color\n\n  // Use the provided currentTime (for dragging) or the event's actual time\n  const displayStart = useMemo(() => {\n    return currentTime || new Date(event.start)\n  }, [currentTime, event.start])\n\n  const displayEnd = useMemo(() => {\n    return currentTime\n      ? new Date(\n          new Date(currentTime).getTime() +\n            (new Date(event.end).getTime() - new Date(event.start).getTime())\n        )\n      : new Date(event.end)\n  }, [currentTime, event.start, event.end])\n\n  // Calculate event duration in minutes\n  const durationMinutes = useMemo(() => {\n    return differenceInMinutes(displayEnd, displayStart)\n  }, [displayStart, displayEnd])\n\n  const getEventTime = () => {\n    if (event.allDay) return \"All day\"\n\n    // For short events (less than 45 minutes), only show start time\n    if (durationMinutes < 45) {\n      return formatTimeWithOptionalMinutes(displayStart)\n    }\n\n    // For longer events, show both start and end time\n    return `${formatTimeWithOptionalMinutes(displayStart)} - ${formatTimeWithOptionalMinutes(displayEnd)}`\n  }\n\n  if (view === \"month\") {\n    return (\n      <EventWrapper\n        event={event}\n        isFirstDay={isFirstDay}\n        isLastDay={isLastDay}\n        isDragging={isDragging}\n        onClick={onClick}\n        className={cn(\n          \"mt-[var(--event-gap)] h-full py-0.5 items-center text-[10px] sm:text-xs\",\n          className\n        )}\n        currentTime={currentTime}\n        dndListeners={dndListeners}\n        dndAttributes={dndAttributes}\n        onMouseDown={onMouseDown}\n        onTouchStart={onTouchStart}\n      >\n        {children || (\n          <span>\n            {!event.allDay && (\n              <span className=\"truncate font-normal opacity-70 sm:text-[11px]\">\n                {formatTimeWithOptionalMinutes(displayStart)}{\" \"}\n              </span>\n            )}\n            {event.title}\n          </span>\n        )}\n      </EventWrapper>\n    )\n  }\n\n  if (view === \"week\" || view === \"day\") {\n    return (\n      <EventWrapper\n        event={event}\n        isFirstDay={isFirstDay}\n        isLastDay={isLastDay}\n        isDragging={isDragging}\n        onClick={onClick}\n        className={cn(\n          \"py-1\",\n          durationMinutes < 45 ? \"items-center\" : \"flex-col\",\n          view === \"week\" ? \"text-[10px] sm:text-xs\" : \"text-xs\",\n          className\n        )}\n        currentTime={currentTime}\n        dndListeners={dndListeners}\n        dndAttributes={dndAttributes}\n        onMouseDown={onMouseDown}\n        onTouchStart={onTouchStart}\n      >\n        {durationMinutes < 45 ? (\n          <div className=\"truncate\">\n            {event.title}{\" \"}\n            {showTime && (\n              <span className=\"opacity-70\">\n                {formatTimeWithOptionalMinutes(displayStart)}\n              </span>\n            )}\n          </div>\n        ) : (\n          <>\n            <div className=\"truncate font-medium\">{event.title}</div>\n            {showTime && (\n              <div className=\"truncate font-normal opacity-70 sm:text-[11px]\">\n                {getEventTime()}\n              </div>\n            )}\n          </>\n        )}\n      </EventWrapper>\n    )\n  }\n\n  // Agenda view - kept separate since it's significantly different\n  return (\n    <button\n      className={cn(\n        \"focus-visible:border-ring focus-visible:ring-ring/50 flex w-full flex-col gap-1 rounded p-2 text-left transition outline-none focus-visible:ring-[3px] [&[data-past-event]]:line-through [&[data-past-event]]:opacity-90\",\n        getEventColorClasses(eventColor),\n        className\n      )}\n      data-past-event={isPast(new Date(event.end)) || undefined}\n      onClick={onClick}\n      onMouseDown={onMouseDown}\n      onTouchStart={onTouchStart}\n      {...dndListeners}\n      {...dndAttributes}\n    >\n      <div className=\"text-sm font-medium\">{event.title}</div>\n      <div className=\"text-xs opacity-70\">\n        {event.allDay ? (\n          <span>All day</span>\n        ) : (\n          <span className=\"uppercase\">\n            {formatTimeWithOptionalMinutes(displayStart)} -{\" \"}\n            {formatTimeWithOptionalMinutes(displayEnd)}\n          </span>\n        )}\n        {event.location && (\n          <>\n            <span className=\"px-1 opacity-35\"> Â· </span>\n            <span>{event.location}</span>\n          </>\n        )}\n      </div>\n      {event.description && (\n        <div className=\"my-1 text-xs opacity-90\">{event.description}</div>\n      )}\n    </button>\n  )\n}\n","import { useMemo } from \"react\"\nimport { RiCalendarEventLine } from \"@remixicon/react\"\nimport { addDays, format, isToday } from \"date-fns\"\n\nimport { AgendaDaysToShow } from \"./constants\"\nimport { EventItem } from \"./event-item\"\nimport { CalendarEvent } from \"./types\"\nimport { getAgendaEventsForDay } from \"./utils\"\n\ninterface AgendaViewProps {\n  currentDate: Date\n  events: CalendarEvent[]\n  onEventSelect?: (event: CalendarEvent) => void\n}\n\nexport function AgendaView({\n  currentDate,\n  events,\n  onEventSelect,\n}: AgendaViewProps) {\n  // Show events for the next days based on constant\n  const days = useMemo(() => {\n    console.log(\"Agenda view updating with date:\", currentDate.toISOString())\n    return Array.from({ length: AgendaDaysToShow }, (_, i) =>\n      addDays(new Date(currentDate), i)\n    )\n  }, [currentDate])\n\n  const handleEventClick = (event: CalendarEvent, e: React.MouseEvent) => {\n    e.stopPropagation()\n    console.log(\"Agenda view event clicked:\", event)\n    onEventSelect?.(event)\n  }\n\n  // Check if there are any days with events\n  const hasEvents = days.some(\n    (day) => getAgendaEventsForDay(events, day).length > 0\n  )\n\n  return (\n    <div className=\"border-border/70 border-t px-4\">\n      {!hasEvents ? (\n        <div className=\"flex min-h-[70svh] flex-col items-center justify-center py-16 text-center\">\n          <RiCalendarEventLine\n            size={32}\n            className=\"text-muted-foreground/50 mb-2\"\n          />\n          <h3 className=\"text-lg font-medium\">No events found</h3>\n          <p className=\"text-muted-foreground\">\n            There are no events scheduled for this time period.\n          </p>\n        </div>\n      ) : (\n        days.map((day) => {\n          const dayEvents = getAgendaEventsForDay(events, day)\n\n          if (dayEvents.length === 0) return null\n\n          return (\n            <div\n              key={day.toString()}\n              className=\"border-border/70 relative my-12 border-t\"\n            >\n              <span\n                className=\"bg-background absolute -top-3 left-0 flex h-6 items-center pe-4 text-[10px] uppercase data-today:font-medium sm:pe-4 sm:text-xs\"\n                data-today={isToday(day) || undefined}\n              >\n                {format(day, \"d MMM, EEEE\")}\n              </span>\n              <div className=\"mt-6 space-y-2\">\n                {dayEvents.map((event) => (\n                  <EventItem\n                    key={event.id}\n                    event={event}\n                    view=\"agenda\"\n                    onClick={(e) => handleEventClick(event, e)}\n                  />\n                ))}\n              </div>\n            </div>\n          )\n        })\n      )}\n    </div>\n  )\n}\n","import {\n  createContext,\n  useContext,\n  useId,\n  useRef,\n  useState,\n  type ReactNode,\n} from \"react\"\nimport {\n  DndContext,\n  DragOverlay,\n  MouseSensor,\n  PointerSensor,\n  TouchSensor,\n  useSensor,\n  useSensors,\n  type DragEndEvent,\n  type DragOverEvent,\n  type DragStartEvent,\n  type UniqueIdentifier,\n} from \"@dnd-kit/core\"\nimport { addMinutes, differenceInMinutes } from \"date-fns\"\n\nimport { EventItem } from \"./event-item\"\nimport { CalendarEvent } from \"./types\"\n\n// Define the context type\ntype CalendarDndContextType = {\n  activeEvent: CalendarEvent | null\n  activeId: UniqueIdentifier | null\n  activeView: \"month\" | \"week\" | \"day\" | null\n  currentTime: Date | null\n  eventHeight: number | null\n  isMultiDay: boolean\n  multiDayWidth: number | null\n  dragHandlePosition: {\n    x?: number\n    y?: number\n    data?: {\n      isFirstDay?: boolean\n      isLastDay?: boolean\n    }\n  } | null\n}\n\n// Create the context\nconst CalendarDndContext = createContext<CalendarDndContextType>({\n  activeEvent: null,\n  activeId: null,\n  activeView: null,\n  currentTime: null,\n  eventHeight: null,\n  isMultiDay: false,\n  multiDayWidth: null,\n  dragHandlePosition: null,\n})\n\n// Hook to use the context\nexport const useCalendarDnd = () => useContext(CalendarDndContext)\n\n// Props for the provider\ninterface CalendarDndProviderProps {\n  children: ReactNode\n  onEventUpdate: (event: CalendarEvent) => void\n}\n\nexport function CalendarDndProvider({\n  children,\n  onEventUpdate,\n}: CalendarDndProviderProps) {\n  const [activeEvent, setActiveEvent] = useState<CalendarEvent | null>(null)\n  const [activeId, setActiveId] = useState<UniqueIdentifier | null>(null)\n  const [activeView, setActiveView] = useState<\"month\" | \"week\" | \"day\" | null>(\n    null\n  )\n  const [currentTime, setCurrentTime] = useState<Date | null>(null)\n  const [eventHeight, setEventHeight] = useState<number | null>(null)\n  const [isMultiDay, setIsMultiDay] = useState(false)\n  const [multiDayWidth, setMultiDayWidth] = useState<number | null>(null)\n  const [dragHandlePosition, setDragHandlePosition] = useState<{\n    x?: number\n    y?: number\n    data?: {\n      isFirstDay?: boolean\n      isLastDay?: boolean\n    }\n  } | null>(null)\n\n  // Store original event dimensions\n  const eventDimensions = useRef<{ height: number }>({ height: 0 })\n\n  // Configure sensors for better drag detection\n  const sensors = useSensors(\n    useSensor(MouseSensor, {\n      // Require the mouse to move by 5px before activating\n      activationConstraint: {\n        distance: 5,\n      },\n    }),\n    useSensor(TouchSensor, {\n      // Press delay of 250ms, with tolerance of 5px of movement\n      activationConstraint: {\n        delay: 250,\n        tolerance: 5,\n      },\n    }),\n    useSensor(PointerSensor, {\n      // Require the pointer to move by 5px before activating\n      activationConstraint: {\n        distance: 5,\n      },\n    })\n  )\n\n  // Generate a stable ID for the DndContext\n  const dndContextId = useId()\n\n  const handleDragStart = (event: DragStartEvent) => {\n    const { active } = event\n\n    // Add safety check for data.current\n    if (!active.data.current) {\n      console.error(\"Missing data in drag start event\", event)\n      return\n    }\n\n    const {\n      event: calendarEvent,\n      view,\n      height,\n      isMultiDay: eventIsMultiDay,\n      multiDayWidth: eventMultiDayWidth,\n      dragHandlePosition: eventDragHandlePosition,\n    } = active.data.current as {\n      event: CalendarEvent\n      view: \"month\" | \"week\" | \"day\"\n      height?: number\n      isMultiDay?: boolean\n      multiDayWidth?: number\n      dragHandlePosition?: {\n        x?: number\n        y?: number\n        data?: {\n          isFirstDay?: boolean\n          isLastDay?: boolean\n        }\n      }\n    }\n\n    setActiveEvent(calendarEvent)\n    setActiveId(active.id)\n    setActiveView(view)\n    setCurrentTime(new Date(calendarEvent.start))\n    setIsMultiDay(eventIsMultiDay || false)\n    setMultiDayWidth(eventMultiDayWidth || null)\n    setDragHandlePosition(eventDragHandlePosition || null)\n\n    // Store event height if provided\n    if (height) {\n      eventDimensions.current.height = height\n      setEventHeight(height)\n    }\n  }\n\n  const handleDragOver = (event: DragOverEvent) => {\n    const { over } = event\n\n    if (over && activeEvent && over.data.current) {\n      const { date, time } = over.data.current as { date: Date; time?: number }\n\n      // Update time for week/day views\n      if (time !== undefined && activeView !== \"month\") {\n        const newTime = new Date(date)\n\n        // Calculate hours and minutes with 15-minute precision\n        const hours = Math.floor(time)\n        const fractionalHour = time - hours\n\n        // Map to nearest 15 minute interval (0, 0.25, 0.5, 0.75)\n        let minutes = 0\n        if (fractionalHour < 0.125) minutes = 0\n        else if (fractionalHour < 0.375) minutes = 15\n        else if (fractionalHour < 0.625) minutes = 30\n        else minutes = 45\n\n        newTime.setHours(hours, minutes, 0, 0)\n\n        // Only update if time has changed\n        if (\n          !currentTime ||\n          newTime.getHours() !== currentTime.getHours() ||\n          newTime.getMinutes() !== currentTime.getMinutes() ||\n          newTime.getDate() !== currentTime.getDate() ||\n          newTime.getMonth() !== currentTime.getMonth() ||\n          newTime.getFullYear() !== currentTime.getFullYear()\n        ) {\n          setCurrentTime(newTime)\n        }\n      } else if (activeView === \"month\") {\n        // For month view, just update the date but preserve time\n        const newTime = new Date(date)\n        if (currentTime) {\n          newTime.setHours(\n            currentTime.getHours(),\n            currentTime.getMinutes(),\n            currentTime.getSeconds(),\n            currentTime.getMilliseconds()\n          )\n        }\n\n        // Only update if date has changed\n        if (\n          !currentTime ||\n          newTime.getDate() !== currentTime.getDate() ||\n          newTime.getMonth() !== currentTime.getMonth() ||\n          newTime.getFullYear() !== currentTime.getFullYear()\n        ) {\n          setCurrentTime(newTime)\n        }\n      }\n    }\n  }\n\n  const handleDragEnd = (event: DragEndEvent) => {\n    const { active, over } = event\n\n    // Add robust error checking\n    if (!over || !activeEvent || !currentTime) {\n      // Reset state and exit early\n      setActiveEvent(null)\n      setActiveId(null)\n      setActiveView(null)\n      setCurrentTime(null)\n      setEventHeight(null)\n      setIsMultiDay(false)\n      setMultiDayWidth(null)\n      setDragHandlePosition(null)\n      return\n    }\n\n    try {\n      // Safely access data with checks\n      if (!active.data.current || !over.data.current) {\n        throw new Error(\"Missing data in drag event\")\n      }\n\n      const activeData = active.data.current as {\n        event?: CalendarEvent\n        view?: string\n      }\n      const overData = over.data.current as { date?: Date; time?: number }\n\n      // Verify we have all required data\n      if (!activeData.event || !overData.date) {\n        throw new Error(\"Missing required event data\")\n      }\n\n      const calendarEvent = activeData.event\n      const date = overData.date\n      const time = overData.time\n\n      // Calculate new start time\n      const newStart = new Date(date)\n\n      // If time is provided (for week/day views), set the hours and minutes\n      if (time !== undefined) {\n        const hours = Math.floor(time)\n        const fractionalHour = time - hours\n\n        // Map to nearest 15 minute interval (0, 0.25, 0.5, 0.75)\n        let minutes = 0\n        if (fractionalHour < 0.125) minutes = 0\n        else if (fractionalHour < 0.375) minutes = 15\n        else if (fractionalHour < 0.625) minutes = 30\n        else minutes = 45\n\n        newStart.setHours(hours, minutes, 0, 0)\n      } else {\n        // For month view, preserve the original time from currentTime\n        newStart.setHours(\n          currentTime.getHours(),\n          currentTime.getMinutes(),\n          currentTime.getSeconds(),\n          currentTime.getMilliseconds()\n        )\n      }\n\n      // Calculate new end time based on the original duration\n      const originalStart = new Date(calendarEvent.start)\n      const originalEnd = new Date(calendarEvent.end)\n      const durationMinutes = differenceInMinutes(originalEnd, originalStart)\n      const newEnd = addMinutes(newStart, durationMinutes)\n\n      // Only update if the start time has actually changed\n      const hasStartTimeChanged =\n        originalStart.getFullYear() !== newStart.getFullYear() ||\n        originalStart.getMonth() !== newStart.getMonth() ||\n        originalStart.getDate() !== newStart.getDate() ||\n        originalStart.getHours() !== newStart.getHours() ||\n        originalStart.getMinutes() !== newStart.getMinutes()\n\n      if (hasStartTimeChanged) {\n        // Update the event only if the time has changed\n        onEventUpdate({\n          ...calendarEvent,\n          start: newStart,\n          end: newEnd,\n        })\n      }\n    } catch (error) {\n      console.error(\"Error in drag end handler:\", error)\n    } finally {\n      // Always reset state\n      setActiveEvent(null)\n      setActiveId(null)\n      setActiveView(null)\n      setCurrentTime(null)\n      setEventHeight(null)\n      setIsMultiDay(false)\n      setMultiDayWidth(null)\n      setDragHandlePosition(null)\n    }\n  }\n\n  return (\n    <DndContext\n      id={dndContextId}\n      sensors={sensors}\n      onDragStart={handleDragStart}\n      onDragOver={handleDragOver}\n      onDragEnd={handleDragEnd}\n    >\n      <CalendarDndContext.Provider\n        value={{\n          activeEvent,\n          activeId,\n          activeView,\n          currentTime,\n          eventHeight,\n          isMultiDay,\n          multiDayWidth,\n          dragHandlePosition,\n        }}\n      >\n        {children}\n\n        <DragOverlay adjustScale={false} dropAnimation={null}>\n          {activeEvent && activeView && (\n            <div\n              style={{\n                height: eventHeight ? `${eventHeight}px` : \"auto\",\n                width:\n                  isMultiDay && multiDayWidth ? `${multiDayWidth}%` : \"100%\",\n                // Remove the transform that was causing the shift\n              }}\n            >\n              <EventItem\n                event={activeEvent}\n                view={activeView}\n                isDragging={true}\n                showTime={activeView !== \"month\"}\n                currentTime={currentTime || undefined}\n                isFirstDay={dragHandlePosition?.data?.isFirstDay !== false}\n                isLastDay={dragHandlePosition?.data?.isLastDay !== false}\n              />\n            </div>\n          )}\n        </DragOverlay>\n      </CalendarDndContext.Provider>\n    </DndContext>\n  )\n}\n","import { useRef, useState } from \"react\"\nimport { useDraggable } from \"@dnd-kit/core\"\nimport { CSS } from \"@dnd-kit/utilities\"\nimport { differenceInDays } from \"date-fns\"\n\nimport { useCalendarDnd } from \"./calendar-dnd-context\"\nimport { EventItem } from \"./event-item\"\nimport { CalendarEvent } from \"./types\"\n\ninterface DraggableEventProps {\n  event: CalendarEvent\n  view: \"month\" | \"week\" | \"day\"\n  showTime?: boolean\n  onClick?: (e: React.MouseEvent) => void\n  height?: number\n  isMultiDay?: boolean\n  multiDayWidth?: number\n  isFirstDay?: boolean\n  isLastDay?: boolean\n  \"aria-hidden\"?: boolean | \"true\" | \"false\"\n}\n\nexport function DraggableEvent({\n  event,\n  view,\n  showTime,\n  onClick,\n  height,\n  isMultiDay,\n  multiDayWidth,\n  isFirstDay = true,\n  isLastDay = true,\n  \"aria-hidden\": ariaHidden,\n}: DraggableEventProps) {\n  const { activeId } = useCalendarDnd()\n  const elementRef = useRef<HTMLDivElement>(null)\n  const [dragHandlePosition, setDragHandlePosition] = useState<{\n    x: number\n    y: number\n  } | null>(null)\n\n  // Check if this is a multi-day event\n  const eventStart = new Date(event.start)\n  const eventEnd = new Date(event.end)\n  const isMultiDayEvent =\n    isMultiDay || event.allDay || differenceInDays(eventEnd, eventStart) >= 1\n\n  const { attributes, listeners, setNodeRef, transform, isDragging } =\n    useDraggable({\n      id: `${event.id}-${view}`,\n      data: {\n        event,\n        view,\n        height: height || elementRef.current?.offsetHeight || null,\n        isMultiDay: isMultiDayEvent,\n        multiDayWidth: multiDayWidth,\n        dragHandlePosition,\n        isFirstDay,\n        isLastDay,\n      },\n    })\n\n  // Handle mouse down to track where on the event the user clicked\n  const handleMouseDown = (e: React.MouseEvent) => {\n    if (elementRef.current) {\n      const rect = elementRef.current.getBoundingClientRect()\n      setDragHandlePosition({\n        x: e.clientX - rect.left,\n        y: e.clientY - rect.top,\n      })\n    }\n  }\n\n  // Don't render if this event is being dragged\n  if (isDragging || activeId === `${event.id}-${view}`) {\n    return (\n      <div\n        ref={setNodeRef}\n        className=\"opacity-0\"\n        style={{ height: height || \"auto\" }}\n      />\n    )\n  }\n\n  const style = transform\n    ? {\n        transform: CSS.Translate.toString(transform),\n        height: height || \"auto\",\n        width:\n          isMultiDayEvent && multiDayWidth ? `${multiDayWidth}%` : undefined,\n      }\n    : {\n        height: height || \"auto\",\n        width:\n          isMultiDayEvent && multiDayWidth ? `${multiDayWidth}%` : undefined,\n      }\n\n  // Handle touch start to track where on the event the user touched\n  const handleTouchStart = (e: React.TouchEvent) => {\n    if (elementRef.current) {\n      const rect = elementRef.current.getBoundingClientRect()\n      const touch = e.touches[0]\n      if (touch) {\n        setDragHandlePosition({\n          x: touch.clientX - rect.left,\n          y: touch.clientY - rect.top,\n        })\n      }\n    }\n  }\n\n  return (\n    <div\n      ref={(node) => {\n        setNodeRef(node)\n        //@ts-ignore\n        if (elementRef) elementRef.current = node\n      }}\n      style={style}\n      className=\"touch-none\"\n    >\n      <EventItem\n        event={event}\n        view={view}\n        showTime={showTime}\n        isFirstDay={isFirstDay}\n        isLastDay={isLastDay}\n        isDragging={isDragging}\n        onClick={onClick}\n        onMouseDown={handleMouseDown}\n        onTouchStart={handleTouchStart}\n        dndListeners={listeners}\n        dndAttributes={attributes}\n        aria-hidden={ariaHidden}\n      />\n    </div>\n  )\n}\n","import { useDroppable } from \"@dnd-kit/core\"\n\nimport { useCalendarDnd } from \"./calendar-dnd-context\"\nimport { cn } from \"./lib/utils\"\n\ninterface DroppableCellProps {\n  id: string\n  date: Date\n  time?: number // For week/day views, represents hours (e.g., 9.25 for 9:15)\n  children?: React.ReactNode\n  className?: string\n  onClick?: () => void\n}\n\nexport function DroppableCell({\n  id,\n  date,\n  time,\n  children,\n  className,\n  onClick,\n}: DroppableCellProps) {\n  const { activeEvent } = useCalendarDnd()\n\n  const { setNodeRef, isOver } = useDroppable({\n    id,\n    data: {\n      date,\n      time,\n    },\n  })\n\n  // Format time for display in tooltip (only for debugging)\n  const formattedTime =\n    time !== undefined\n      ? `${Math.floor(time)}:${Math.round((time - Math.floor(time)) * 60)\n          .toString()\n          .padStart(2, \"0\")}`\n      : null\n\n  return (\n    <div\n      ref={setNodeRef}\n      onClick={onClick}\n      className={cn(\n        \"[&[data-dragging]]:bg-accent flex h-full flex-col overflow-hidden px-0.5 py-1 sm:px-1\",\n        className\n      )}\n      title={formattedTime ? `${formattedTime}` : undefined}\n      data-dragging={isOver && activeEvent ? true : undefined}\n    >\n      {children}\n    </div>\n  )\n}\n","import { useEffect, useState } from \"react\"\nimport { endOfWeek, isSameDay, isWithinInterval, startOfWeek } from \"date-fns\"\n\nimport { EndHour, StartHour } from \"../constants\"\n\nexport function useCurrentTimeIndicator(\n  currentDate: Date,\n  view: \"day\" | \"week\"\n) {\n  const [currentTimePosition, setCurrentTimePosition] = useState<number>(0)\n  const [currentTimeVisible, setCurrentTimeVisible] = useState<boolean>(false)\n\n  useEffect(() => {\n    const calculateTimePosition = () => {\n      const now = new Date()\n      const hours = now.getHours()\n      const minutes = now.getMinutes()\n      const totalMinutes = (hours - StartHour) * 60 + minutes\n      const dayStartMinutes = 0 // 12am\n      const dayEndMinutes = (EndHour - StartHour) * 60 // 12am next day\n\n      // Calculate position as percentage of day\n      const position =\n        ((totalMinutes - dayStartMinutes) / (dayEndMinutes - dayStartMinutes)) *\n        100\n\n      // Check if current day is in view based on the calendar view\n      let isCurrentTimeVisible = false\n\n      if (view === \"day\") {\n        isCurrentTimeVisible = isSameDay(now, currentDate)\n      } else if (view === \"week\") {\n        const startOfWeekDate = startOfWeek(currentDate, { weekStartsOn: 0 })\n        const endOfWeekDate = endOfWeek(currentDate, { weekStartsOn: 0 })\n        isCurrentTimeVisible = isWithinInterval(now, {\n          start: startOfWeekDate,\n          end: endOfWeekDate,\n        })\n      }\n\n      setCurrentTimePosition(position)\n      setCurrentTimeVisible(isCurrentTimeVisible)\n    }\n\n    // Calculate immediately\n    calculateTimePosition()\n\n    // Update every minute\n    const interval = setInterval(calculateTimePosition, 60000)\n\n    return () => clearInterval(interval)\n  }, [currentDate, view])\n\n  return { currentTimePosition, currentTimeVisible }\n}\n","import React, { useMemo } from \"react\"\nimport {\n  addHours,\n  areIntervalsOverlapping,\n  differenceInMinutes,\n  eachHourOfInterval,\n  format,\n  getHours,\n  getMinutes,\n  isSameDay,\n  startOfDay,\n} from \"date-fns\"\n\nimport { EndHour, StartHour, WeekCellsHeight } from \"./constants\"\nimport { DraggableEvent } from \"./draggable-event\"\nimport { DroppableCell } from \"./droppable-cell\"\nimport { EventItem } from \"./event-item\"\nimport { useCurrentTimeIndicator } from \"./hooks/use-current-time-indicator\"\nimport { cn } from \"./lib/utils\"\nimport { CalendarEvent } from \"./types\"\nimport { isMultiDayEvent } from \"./utils\"\n\ninterface DayViewProps {\n  currentDate: Date\n  events: CalendarEvent[]\n  onEventSelect?: (event: CalendarEvent) => void\n  onEventCreate?: (startTime: Date) => void\n}\n\ninterface PositionedEvent {\n  event: CalendarEvent\n  top: number\n  height: number\n  left: number\n  width: number\n  zIndex: number\n}\n\nexport function DayView({\n  currentDate,\n  events,\n  onEventSelect,\n  onEventCreate,\n}: DayViewProps) {\n  const hours = useMemo(() => {\n    const dayStart = startOfDay(currentDate)\n    return eachHourOfInterval({\n      start: addHours(dayStart, StartHour),\n      end: addHours(dayStart, EndHour - 1),\n    })\n  }, [currentDate])\n\n  const dayEvents = useMemo(() => {\n    return events\n      .filter((event) => {\n        const eventStart = new Date(event.start)\n        const eventEnd = new Date(event.end)\n        return (\n          isSameDay(currentDate, eventStart) ||\n          isSameDay(currentDate, eventEnd) ||\n          (currentDate > eventStart && currentDate < eventEnd)\n        )\n      })\n      .sort((a, b) => new Date(a.start).getTime() - new Date(b.start).getTime())\n  }, [currentDate, events])\n\n  // Filter all-day events\n  const allDayEvents = useMemo(() => {\n    return dayEvents.filter((event) => {\n      // Include explicitly marked all-day events or multi-day events\n      return event.allDay || isMultiDayEvent(event)\n    })\n  }, [dayEvents])\n\n  // Get only single-day time-based events\n  const timeEvents = useMemo(() => {\n    return dayEvents.filter((event) => {\n      // Exclude all-day events and multi-day events\n      return !event.allDay && !isMultiDayEvent(event)\n    })\n  }, [dayEvents])\n\n  // Process events to calculate positions\n  const positionedEvents = useMemo(() => {\n    const result: PositionedEvent[] = []\n    const dayStart = startOfDay(currentDate)\n\n    // Sort events by start time and duration\n    const sortedEvents = [...timeEvents].sort((a, b) => {\n      const aStart = new Date(a.start)\n      const bStart = new Date(b.start)\n      const aEnd = new Date(a.end)\n      const bEnd = new Date(b.end)\n\n      // First sort by start time\n      if (aStart < bStart) return -1\n      if (aStart > bStart) return 1\n\n      // If start times are equal, sort by duration (longer events first)\n      const aDuration = differenceInMinutes(aEnd, aStart)\n      const bDuration = differenceInMinutes(bEnd, bStart)\n      return bDuration - aDuration\n    })\n\n    // Track columns for overlapping events\n    const columns: { event: CalendarEvent; end: Date }[][] = []\n\n    sortedEvents.forEach((event) => {\n      const eventStart = new Date(event.start)\n      const eventEnd = new Date(event.end)\n\n      // Adjust start and end times if they're outside this day\n      const adjustedStart = isSameDay(currentDate, eventStart)\n        ? eventStart\n        : dayStart\n      const adjustedEnd = isSameDay(currentDate, eventEnd)\n        ? eventEnd\n        : addHours(dayStart, 24)\n\n      // Calculate top position and height\n      const startHour = getHours(adjustedStart) + getMinutes(adjustedStart) / 60\n      const endHour = getHours(adjustedEnd) + getMinutes(adjustedEnd) / 60\n      const top = (startHour - StartHour) * WeekCellsHeight\n      const height = (endHour - startHour) * WeekCellsHeight\n\n      // Find a column for this event\n      let columnIndex = 0\n      let placed = false\n\n      while (!placed) {\n        const col = columns[columnIndex] || []\n        if (col.length === 0) {\n          columns[columnIndex] = col\n          placed = true\n        } else {\n          const overlaps = col.some((c) =>\n            areIntervalsOverlapping(\n              { start: adjustedStart, end: adjustedEnd },\n              { start: new Date(c.event.start), end: new Date(c.event.end) }\n            )\n          )\n          if (!overlaps) {\n            placed = true\n          } else {\n            columnIndex++\n          }\n        }\n      }\n\n      // Ensure column is initialized before pushing\n      const currentColumn = columns[columnIndex] || []\n      columns[columnIndex] = currentColumn\n      currentColumn.push({ event, end: adjustedEnd })\n\n      // First column takes full width, others are indented by 10% and take 90% width\n      const width = columnIndex === 0 ? 1 : 1 - columnIndex * 0.1\n      const left = columnIndex === 0 ? 0 : columnIndex * 0.1\n\n      result.push({\n        event,\n        top,\n        height,\n        left,\n        width,\n        zIndex: 10 + columnIndex, // Higher columns get higher z-index\n      })\n    })\n\n    return result\n  }, [currentDate, timeEvents])\n\n  const handleEventClick = (event: CalendarEvent, e: React.MouseEvent) => {\n    e.stopPropagation()\n    onEventSelect?.(event)\n  }\n\n  const showAllDaySection = allDayEvents.length > 0\n  const { currentTimePosition, currentTimeVisible } = useCurrentTimeIndicator(\n    currentDate,\n    \"day\"\n  )\n\n  return (\n    <div data-slot=\"day-view\" className=\"contents\">\n      {showAllDaySection && (\n        <div className=\"border-border/70 bg-muted/50 border-t\">\n          <div className=\"grid grid-cols-[3rem_1fr] sm:grid-cols-[4rem_1fr]\">\n            <div className=\"relative\">\n              <span className=\"text-muted-foreground/70 absolute bottom-0 left-0 h-6 w-16 max-w-full pe-2 text-right text-[10px] sm:pe-4 sm:text-xs\">\n                All day\n              </span>\n            </div>\n            <div className=\"border-border/70 relative border-r p-1 last:border-r-0\">\n              {allDayEvents.map((event) => {\n                const eventStart = new Date(event.start)\n                const eventEnd = new Date(event.end)\n                const isFirstDay = isSameDay(currentDate, eventStart)\n                const isLastDay = isSameDay(currentDate, eventEnd)\n\n                return (\n                  <EventItem\n                    key={`spanning-${event.id}`}\n                    onClick={(e) => handleEventClick(event, e)}\n                    event={event}\n                    view=\"month\"\n                    isFirstDay={isFirstDay}\n                    isLastDay={isLastDay}\n                  >\n                    {/* Always show the title in day view for better usability */}\n                    <div>{event.title}</div>\n                  </EventItem>\n                )\n              })}\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"border-border/70 grid flex-1 grid-cols-[3rem_1fr] overflow-hidden border-t sm:grid-cols-[4rem_1fr]\">\n        <div>\n          {hours.map((hour, index) => (\n            <div\n              key={hour.toString()}\n              className=\"border-border/70 relative h-[var(--week-cells-height)] border-b last:border-b-0\"\n            >\n              {index > 0 && (\n                <span className=\"bg-background text-muted-foreground/70 absolute -top-3 left-0 flex h-6 w-16 max-w-full items-center justify-end pe-2 text-[10px] sm:pe-4 sm:text-xs\">\n                  {format(hour, \"h a\")}\n                </span>\n              )}\n            </div>\n          ))}\n        </div>\n\n        <div className=\"relative\">\n          {/* Positioned events */}\n          {positionedEvents.map((positionedEvent) => (\n            <div\n              key={positionedEvent.event.id}\n              className=\"absolute z-10 px-0.5\"\n              style={{\n                top: `${positionedEvent.top}px`,\n                height: `${positionedEvent.height}px`,\n                left: `${positionedEvent.left * 100}%`,\n                width: `${positionedEvent.width * 100}%`,\n                zIndex: positionedEvent.zIndex,\n              }}\n            >\n              <div className=\"h-full w-full\">\n                <DraggableEvent\n                  event={positionedEvent.event}\n                  view=\"day\"\n                  onClick={(e) => handleEventClick(positionedEvent.event, e)}\n                  showTime\n                  height={positionedEvent.height}\n                />\n              </div>\n            </div>\n          ))}\n\n          {/* Current time indicator */}\n          {currentTimeVisible && (\n            <div\n              className=\"pointer-events-none absolute right-0 left-0 z-20\"\n              style={{ top: `${currentTimePosition}%` }}\n            >\n              <div className=\"relative flex items-center\">\n                <div className=\"bg-primary absolute -left-1 h-2 w-2 rounded-full\"></div>\n                <div className=\"bg-primary h-[2px] w-full\"></div>\n              </div>\n            </div>\n          )}\n\n          {/* Time grid */}\n          {hours.map((hour) => {\n            const hourValue = getHours(hour)\n            return (\n              <div\n                key={hour.toString()}\n                className=\"border-border/70 relative h-[var(--week-cells-height)] border-b last:border-b-0\"\n              >\n                {/* Quarter-hour intervals */}\n                {[0, 1, 2, 3].map((quarter) => {\n                  const quarterHourTime = hourValue + quarter * 0.25\n                  return (\n                    <DroppableCell\n                      key={`${hour.toString()}-${quarter}`}\n                      id={`day-cell-${currentDate.toISOString()}-${quarterHourTime}`}\n                      date={currentDate}\n                      time={quarterHourTime}\n                      className={cn(\n                        \"absolute h-[calc(var(--week-cells-height)/4)] w-full\",\n                        quarter === 0 && \"top-0\",\n                        quarter === 1 &&\n                          \"top-[calc(var(--week-cells-height)/4)]\",\n                        quarter === 2 &&\n                          \"top-[calc(var(--week-cells-height)/4*2)]\",\n                        quarter === 3 &&\n                          \"top-[calc(var(--week-cells-height)/4*3)]\"\n                      )}\n                      onClick={() => {\n                        const startTime = new Date(currentDate)\n                        startTime.setHours(hourValue)\n                        startTime.setMinutes(quarter * 15)\n                        onEventCreate?.(startTime)\n                      }}\n                    />\n                  )\n                })}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    </div>\n  )\n}\n","import { useLayoutEffect, useMemo, useRef, useState } from \"react\"\n\ninterface EventVisibilityOptions {\n  eventHeight: number\n  eventGap: number\n}\n\ninterface EventVisibilityResult {\n  contentRef: React.RefObject<HTMLDivElement>\n  contentHeight: number | null\n  getVisibleEventCount: (totalEvents: number) => number\n}\n\n/**\n * Hook for calculating event visibility based on container height\n * Uses ResizeObserver for efficient updates\n */\nexport function useEventVisibility({\n  eventHeight,\n  eventGap,\n}: EventVisibilityOptions): EventVisibilityResult {\n  // Use the standard pattern for React refs\n  const contentRef = useRef<HTMLDivElement>(null)\n  const observerRef = useRef<ResizeObserver | null>(null)\n  const [contentHeight, setContentHeight] = useState<number | null>(null)\n\n  // Use layout effect for synchronous measurement before paint\n  useLayoutEffect(() => {\n    if (!contentRef.current) return\n\n    // Function to update the content height\n    const updateHeight = () => {\n      if (contentRef.current) {\n        setContentHeight(contentRef.current.clientHeight)\n      }\n    }\n\n    // Initial measurement (synchronous)\n    updateHeight()\n\n    // Create observer only once and reuse it\n    if (!observerRef.current) {\n      observerRef.current = new ResizeObserver(() => {\n        // Just call updateHeight when resize is detected\n        updateHeight()\n      })\n    }\n\n    // Start observing the content container\n    observerRef.current.observe(contentRef.current)\n\n    // Clean up function\n    return () => {\n      if (observerRef.current) {\n        observerRef.current.disconnect()\n      }\n    }\n  }, [])\n\n  // Function to calculate visible events for a cell\n  const getVisibleEventCount = useMemo(() => {\n    return (totalEvents: number): number => {\n      if (!contentHeight) return totalEvents\n\n      // Calculate how many events can fit in the container\n      const maxEvents = Math.floor(contentHeight / (eventHeight + eventGap))\n\n      // If all events fit, show them all\n      if (totalEvents <= maxEvents) {\n        return totalEvents\n      } else {\n        // Otherwise, reserve space for \"more\" button by showing one less\n        return maxEvents > 0 ? maxEvents - 1 : 0\n      }\n    }\n  }, [contentHeight, eventHeight, eventGap])\n\n  // Use type assertion to satisfy TypeScript\n  return {\n    contentRef,\n    contentHeight,\n    getVisibleEventCount,\n  } as EventVisibilityResult\n}\n","import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"../lib/utils\"\n\nfunction Popover({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Root>) {\n  return <PopoverPrimitive.Root data-slot=\"popover\" {...props} />\n}\n\nfunction PopoverTrigger({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Trigger>) {\n  return <PopoverPrimitive.Trigger data-slot=\"popover-trigger\" {...props} />\n}\n\nfunction PopoverContent({\n  className,\n  align = \"center\",\n  sideOffset = 4,\n  showArrow = false,\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Content> & {\n  showArrow?: boolean\n}) {\n  return (\n    <PopoverPrimitive.Portal>\n      <PopoverPrimitive.Content\n        data-slot=\"popover-content\"\n        align={align}\n        sideOffset={sideOffset}\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 rounded-md border p-4 shadow-md outline-hidden\",\n          className\n        )}\n        {...props}\n      >\n        {props.children}\n        {showArrow && (\n          <PopoverPrimitive.Arrow className=\"fill-popover -my-px drop-shadow-[0_1px_0_hsl(var(--border))]\" />\n        )}\n      </PopoverPrimitive.Content>\n    </PopoverPrimitive.Portal>\n  )\n}\n\nfunction PopoverAnchor({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Anchor>) {\n  return <PopoverPrimitive.Anchor data-slot=\"popover-anchor\" {...props} />\n}\n\nexport { Popover, PopoverAnchor, PopoverContent, PopoverTrigger }\n","import React, { useEffect, useMemo, useState } from \"react\"\nimport {\n  addDays,\n  eachDayOfInterval,\n  endOfMonth,\n  endOfWeek,\n  format,\n  isSameDay,\n  isSameMonth,\n  isToday,\n  startOfMonth,\n  startOfWeek,\n} from \"date-fns\"\n\nimport { DefaultStartHour, EventGap, EventHeight } from \"./constants\"\nimport { DraggableEvent } from \"./draggable-event\"\nimport { DroppableCell } from \"./droppable-cell\"\nimport { EventCalendarProps } from \"./event-calendar\"\nimport { EventItem } from \"./event-item\"\nimport { useEventVisibility } from \"./hooks/use-event-visibility\"\nimport { CalendarEvent } from \"./types\"\nimport { Popover, PopoverContent, PopoverTrigger } from \"./ui/popover\"\nimport {\n  getAllEventsForDay,\n  getEventsForDay,\n  getSpanningEventsForDay,\n  sortEvents,\n} from \"./utils\"\n\ninterface MonthViewProps\n  extends Pick<\n    EventCalendarProps,\n    \"eventHeight\" | \"eventGap\" | \"showNewEventButton\"\n  > {\n  currentDate: Date\n  events: CalendarEvent[]\n  onEventSelect?: (event: CalendarEvent) => void\n  onEventCreate?: (startTime: Date) => void\n}\n\nexport function MonthView({\n  currentDate,\n  events,\n  onEventSelect,\n  onEventCreate,\n  eventHeight = EventHeight,\n  eventGap = EventGap,\n  showNewEventButton,\n}: MonthViewProps) {\n  const days = useMemo(() => {\n    const monthStart = startOfMonth(currentDate)\n    const monthEnd = endOfMonth(monthStart)\n    const calendarStart = startOfWeek(monthStart, { weekStartsOn: 0 })\n    const calendarEnd = endOfWeek(monthEnd, { weekStartsOn: 0 })\n\n    return eachDayOfInterval({ start: calendarStart, end: calendarEnd })\n  }, [currentDate])\n\n  const weekdays = useMemo(() => {\n    return Array.from({ length: 7 }).map((_, i) => {\n      const date = addDays(startOfWeek(new Date()), i)\n      return format(date, \"EEE\")\n    })\n  }, [])\n\n  const weeks = useMemo(() => {\n    const result = []\n    let week = []\n\n    for (let i = 0; i < days.length; i++) {\n      week.push(days[i])\n      if (week.length === 7 || i === days.length - 1) {\n        result.push(week)\n        week = []\n      }\n    }\n\n    return result\n  }, [days])\n\n  const handleEventClick = (event: CalendarEvent, e: React.MouseEvent) => {\n    e.stopPropagation()\n    onEventSelect?.(event)\n  }\n\n  const [isMounted, setIsMounted] = useState(false)\n  const { contentRef, getVisibleEventCount } = useEventVisibility({\n    eventHeight,\n    eventGap,\n  })\n\n  useEffect(() => {\n    setIsMounted(true)\n  }, [])\n\n  return (\n    <div data-slot=\"month-view\" className=\"contents\">\n      <div className=\"border-border/70 grid grid-cols-7 border-b\">\n        {weekdays.map((day) => (\n          <div\n            key={day}\n            className=\"text-muted-foreground/70 py-2 text-center text-sm\"\n          >\n            {day}\n          </div>\n        ))}\n      </div>\n      <div className=\"grid flex-1 auto-rows-fr\">\n        {weeks.map((week, weekIndex) => (\n          <div\n            key={`week-${weekIndex}`}\n            className=\"grid grid-cols-7 [&:last-child>*]:border-b-0\"\n          >\n            {week.map((day, dayIndex) => {\n              if (!day) return null // Skip if day is undefined\n\n              const dayEvents = getEventsForDay(events, day)\n              const spanningEvents = getSpanningEventsForDay(events, day)\n              const isCurrentMonth = isSameMonth(day, currentDate)\n              const cellId = `month-cell-${day.toISOString()}`\n              const allDayEvents = [...spanningEvents, ...dayEvents]\n              const allEvents = getAllEventsForDay(events, day)\n\n              const isReferenceCell = weekIndex === 0 && dayIndex === 0\n              const visibleCount = isMounted\n                ? getVisibleEventCount(allDayEvents.length)\n                : undefined\n              const hasMore =\n                visibleCount !== undefined && allDayEvents.length > visibleCount\n              const remainingCount = hasMore\n                ? allDayEvents.length - visibleCount\n                : 0\n\n              return (\n                <div\n                  key={day.toString()}\n                  className=\"group [&[data-outside-cell]]:bg-sidebar data-outside-cell:bg-opacity-25 data-outside-cell:text-muted-foreground border-r border-b last:border-r-0\"\n                  data-today={isToday(day) || undefined}\n                  data-outside-cell={!isCurrentMonth || undefined}\n                >\n                  <DroppableCell\n                    id={cellId}\n                    date={day}\n                    onClick={() => {\n                      if (showNewEventButton) {\n                        const startTime = new Date(day)\n                        startTime.setHours(DefaultStartHour, 0, 0)\n                        onEventCreate?.(startTime)\n                      }\n                    }}\n                  >\n                    <div\n                      data-today={isToday(day) || undefined}\n                      className=\"[&[data-today]]:bg-primary [&[data-today]]:text-primary-foreground mt-1 inline-flex size-6 items-center justify-center rounded-full text-sm\"\n                    >\n                      {format(day, \"d\")}\n                    </div>\n                    <div\n                      ref={isReferenceCell ? contentRef : null}\n                      className=\"min-h-[calc((var(--event-height)+var(--event-gap))*2)] sm:min-h-[calc((var(--event-height)+var(--event-gap))*3)] lg:min-h-[calc((var(--event-height)+var(--event-gap))*4)]\"\n                    >\n                      {sortEvents(allDayEvents).map((event, index) => {\n                        const eventStart = new Date(event.start)\n                        const eventEnd = new Date(event.end)\n                        const isFirstDay = isSameDay(day, eventStart)\n                        const isLastDay = isSameDay(day, eventEnd)\n\n                        const isHidden =\n                          isMounted && visibleCount && index >= visibleCount\n\n                        if (!visibleCount) return null\n\n                        if (!isFirstDay) {\n                          return (\n                            <div\n                              key={`spanning-${event.id}-${day.toISOString().slice(0, 10)}`}\n                              className=\"aria-hidden:hidden\"\n                              aria-hidden={isHidden ? \"true\" : undefined}\n                            >\n                              <EventItem\n                                onClick={(e) => handleEventClick(event, e)}\n                                event={event}\n                                view=\"month\"\n                                isFirstDay={isFirstDay}\n                                isLastDay={isLastDay}\n                              >\n                                <div className=\"invisible\" aria-hidden={true}>\n                                  {!event.allDay && (\n                                    <span>\n                                      {format(\n                                        new Date(event.start),\n                                        \"h:mm\"\n                                      )}{\" \"}\n                                    </span>\n                                  )}\n                                  {event.title}\n                                </div>\n                              </EventItem>\n                            </div>\n                          )\n                        }\n\n                        return (\n                          <div\n                            key={event.id}\n                            className=\"aria-hidden:hidden\"\n                            aria-hidden={isHidden ? \"true\" : undefined}\n                          >\n                            <DraggableEvent\n                              event={event}\n                              view=\"month\"\n                              onClick={(e) => handleEventClick(event, e)}\n                              isFirstDay={isFirstDay}\n                              isLastDay={isLastDay}\n                            />\n                          </div>\n                        )\n                      })}\n\n                      {hasMore && (\n                        <Popover modal>\n                          <PopoverTrigger asChild>\n                            <button\n                              className=\"focus-visible:border-ring focus-visible:ring-ring/50 text-muted-foreground hover:text-foreground hover:bg-muted/50 mt-[var(--event-gap)] flex h-[var(--event-height)] w-full items-center overflow-hidden px-1 text-left text-[10px] backdrop-blur-md transition outline-none select-none focus-visible:ring-[3px] sm:px-2 sm:text-xs\"\n                              onClick={(e) => e.stopPropagation()}\n                            >\n                              <span>\n                                + {remainingCount}{\" \"}\n                                <span className=\"max-sm:sr-only\">more</span>\n                              </span>\n                            </button>\n                          </PopoverTrigger>\n                          <PopoverContent\n                            align=\"center\"\n                            className=\"max-w-52 p-3\"\n                            style={\n                              {\n                                \"--event-height\": `${eventHeight}px`,\n                              } as React.CSSProperties\n                            }\n                          >\n                            <div className=\"space-y-2\">\n                              <div className=\"text-sm font-medium\">\n                                {format(day, \"EEE d\")}\n                              </div>\n                              <div className=\"space-y-1\">\n                                {sortEvents(allEvents).map((event) => {\n                                  const eventStart = new Date(event.start)\n                                  const eventEnd = new Date(event.end)\n                                  const isFirstDay = isSameDay(day, eventStart)\n                                  const isLastDay = isSameDay(day, eventEnd)\n\n                                  return (\n                                    <EventItem\n                                      key={event.id}\n                                      onClick={(e) =>\n                                        handleEventClick(event, e)\n                                      }\n                                      event={event}\n                                      view=\"month\"\n                                      isFirstDay={isFirstDay}\n                                      isLastDay={isLastDay}\n                                    />\n                                  )\n                                })}\n                              </div>\n                            </div>\n                          </PopoverContent>\n                        </Popover>\n                      )}\n                    </div>\n                  </DroppableCell>\n                </div>\n              )\n            })}\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n","import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"../lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow-sm hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40\",\n        outline:\n          \"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-3 py-2\",\n        sm: \"h-8 rounded-md px-3 text-xs\",\n        lg: \"h-10 rounded-md px-8\",\n        icon: \"size-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n","import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { CheckIcon, ChevronRightIcon, CircleIcon } from \"lucide-react\"\n\nimport { cn } from \"../lib/utils\"\n\ntype PointerDownEvent = Parameters<\n  NonNullable<DropdownMenuPrimitive.DropdownMenuContentProps[\"onPointerDown\"]>\n>[0]\ntype PointerDownOutsideEvent = Parameters<\n  NonNullable<\n    DropdownMenuPrimitive.DropdownMenuContentProps[\"onPointerDownOutside\"]\n  >\n>[0]\n\nfunction DropdownMenu({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) {\n  return <DropdownMenuPrimitive.Root data-slot=\"dropdown-menu\" {...props} />\n}\n\nfunction DropdownMenuPortal({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) {\n  return (\n    <DropdownMenuPrimitive.Portal data-slot=\"dropdown-menu-portal\" {...props} />\n  )\n}\n\nfunction DropdownMenuTrigger({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Trigger>) {\n  return (\n    <DropdownMenuPrimitive.Trigger\n      data-slot=\"dropdown-menu-trigger\"\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuContent({\n  className,\n  sideOffset = 4,\n  onPointerDown,\n  onPointerDownOutside,\n  onCloseAutoFocus,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Content>) {\n  const isCloseFromMouse = React.useRef<boolean>(false)\n\n  const handlePointerDown = React.useCallback(\n    (e: PointerDownEvent) => {\n      isCloseFromMouse.current = true\n      onPointerDown?.(e)\n    },\n    [onPointerDown]\n  )\n\n  const handlePointerDownOutside = React.useCallback(\n    (e: PointerDownOutsideEvent) => {\n      isCloseFromMouse.current = true\n      onPointerDownOutside?.(e)\n    },\n    [onPointerDownOutside]\n  )\n\n  const handleCloseAutoFocus = React.useCallback(\n    (e: Event) => {\n      if (onCloseAutoFocus) {\n        return onCloseAutoFocus(e)\n      }\n\n      if (!isCloseFromMouse.current) {\n        return\n      }\n\n      e.preventDefault()\n      isCloseFromMouse.current = false\n    },\n    [onCloseAutoFocus]\n  )\n\n  return (\n    <DropdownMenuPrimitive.Portal>\n      <DropdownMenuPrimitive.Content\n        data-slot=\"dropdown-menu-content\"\n        sideOffset={sideOffset}\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-40 overflow-hidden rounded-md border p-1 shadow-lg\",\n          className\n        )}\n        onPointerDown={handlePointerDown}\n        onPointerDownOutside={handlePointerDownOutside}\n        onCloseAutoFocus={handleCloseAutoFocus}\n        {...props}\n      />\n    </DropdownMenuPrimitive.Portal>\n  )\n}\n\nfunction DropdownMenuGroup({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Group>) {\n  return (\n    <DropdownMenuPrimitive.Group data-slot=\"dropdown-menu-group\" {...props} />\n  )\n}\n\nfunction DropdownMenuItem({\n  className,\n  inset,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Item> & {\n  inset?: boolean\n  variant?: \"default\" | \"destructive\"\n}) {\n  return (\n    <DropdownMenuPrimitive.Item\n      data-slot=\"dropdown-menu-item\"\n      data-inset={inset}\n      data-variant={variant}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive-foreground data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/40 data-[variant=destructive]:focus:text-destructive-foreground data-[variant=destructive]:*:[svg]:!text-destructive-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuCheckboxItem({\n  className,\n  children,\n  checked,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.CheckboxItem>) {\n  return (\n    <DropdownMenuPrimitive.CheckboxItem\n      data-slot=\"dropdown-menu-checkbox-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0\",\n        className\n      )}\n      checked={checked}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CheckIcon size={16} />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.CheckboxItem>\n  )\n}\n\nfunction DropdownMenuRadioGroup({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioGroup>) {\n  return (\n    <DropdownMenuPrimitive.RadioGroup\n      data-slot=\"dropdown-menu-radio-group\"\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuRadioItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioItem>) {\n  return (\n    <DropdownMenuPrimitive.RadioItem\n      data-slot=\"dropdown-menu-radio-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0\",\n        className\n      )}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CircleIcon className=\"size-2 fill-current\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.RadioItem>\n  )\n}\n\nfunction DropdownMenuLabel({\n  className,\n  inset,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Label> & {\n  inset?: boolean\n}) {\n  return (\n    <DropdownMenuPrimitive.Label\n      data-slot=\"dropdown-menu-label\"\n      data-inset={inset}\n      className={cn(\n        \"text-muted-foreground px-2 py-1.5 text-xs font-medium data-[inset]:pl-8\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Separator>) {\n  return (\n    <DropdownMenuPrimitive.Separator\n      data-slot=\"dropdown-menu-separator\"\n      className={cn(\"bg-border -mx-1 my-1 h-px\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuShortcut({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) {\n  return (\n    <kbd\n      data-slot=\"dropdown-menu-shortcut\"\n      className={cn(\n        \"bg-background text-muted-foreground/70 ms-auto -me-1 inline-flex h-5 max-h-full items-center rounded border px-1 font-[inherit] text-[0.625rem] font-medium\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuSub({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Sub>) {\n  return <DropdownMenuPrimitive.Sub data-slot=\"dropdown-menu-sub\" {...props} />\n}\n\nfunction DropdownMenuSubTrigger({\n  className,\n  inset,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubTrigger> & {\n  inset?: boolean\n}) {\n  return (\n    <DropdownMenuPrimitive.SubTrigger\n      data-slot=\"dropdown-menu-sub-trigger\"\n      data-inset={inset}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronRightIcon\n        size={16}\n        className=\"text-muted-foreground/80 ml-auto\"\n      />\n    </DropdownMenuPrimitive.SubTrigger>\n  )\n}\n\nfunction DropdownMenuSubContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubContent>) {\n  return (\n    <DropdownMenuPrimitive.SubContent\n      data-slot=\"dropdown-menu-sub-content\"\n      className={cn(\n        \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-40 overflow-hidden rounded-md border p-1 shadow-lg\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  DropdownMenu,\n  DropdownMenuCheckboxItem,\n  DropdownMenuContent,\n  DropdownMenuGroup,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuPortal,\n  DropdownMenuRadioGroup,\n  DropdownMenuRadioItem,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuTrigger,\n}\n","import React, { useMemo } from \"react\"\nimport {\n  addHours,\n  areIntervalsOverlapping,\n  differenceInMinutes,\n  eachDayOfInterval,\n  eachHourOfInterval,\n  endOfWeek,\n  format,\n  getHours,\n  getMinutes,\n  isBefore,\n  isSameDay,\n  isToday,\n  startOfDay,\n  startOfWeek,\n} from \"date-fns\"\n\nimport { EndHour, StartHour, WeekCellsHeight } from \"./constants\"\nimport { DraggableEvent } from \"./draggable-event\"\nimport { DroppableCell } from \"./droppable-cell\"\nimport { EventItem } from \"./event-item\"\nimport { useCurrentTimeIndicator } from \"./hooks/use-current-time-indicator\"\nimport { cn } from \"./lib/utils\"\nimport { CalendarEvent } from \"./types\"\nimport { isMultiDayEvent } from \"./utils\"\n\ninterface WeekViewProps {\n  currentDate: Date\n  events: CalendarEvent[]\n  onEventSelect?: (event: CalendarEvent) => void\n  onEventCreate?: (startTime: Date) => void\n}\n\ninterface PositionedEvent {\n  event: CalendarEvent\n  top: number\n  height: number\n  left: number\n  width: number\n  zIndex: number\n}\n\nexport function WeekView({\n  currentDate,\n  events,\n  onEventSelect,\n  onEventCreate,\n}: WeekViewProps) {\n  const days = useMemo(() => {\n    const weekStart = startOfWeek(currentDate, { weekStartsOn: 0 })\n    const weekEnd = endOfWeek(currentDate, { weekStartsOn: 0 })\n    return eachDayOfInterval({ start: weekStart, end: weekEnd })\n  }, [currentDate])\n\n  const weekStart = useMemo(\n    () => startOfWeek(currentDate, { weekStartsOn: 0 }),\n    [currentDate]\n  )\n\n  const hours = useMemo(() => {\n    const dayStart = startOfDay(currentDate)\n    return eachHourOfInterval({\n      start: addHours(dayStart, StartHour),\n      end: addHours(dayStart, EndHour - 1),\n    })\n  }, [currentDate])\n\n  // Get all-day events and multi-day events for the week\n  const allDayEvents = useMemo(() => {\n    return events\n      .filter((event) => {\n        // Include explicitly marked all-day events or multi-day events\n        return event.allDay || isMultiDayEvent(event)\n      })\n      .filter((event) => {\n        const eventStart = new Date(event.start)\n        const eventEnd = new Date(event.end)\n        return days.some(\n          (day) =>\n            isSameDay(day, eventStart) ||\n            isSameDay(day, eventEnd) ||\n            (day > eventStart && day < eventEnd)\n        )\n      })\n  }, [events, days])\n\n  // Process events for each day to calculate positions\n  const processedDayEvents = useMemo(() => {\n    const result = days.map((day) => {\n      // Get events for this day that are not all-day events or multi-day events\n      const dayEvents = events.filter((event) => {\n        // Skip all-day events and multi-day events\n        if (event.allDay || isMultiDayEvent(event)) return false\n\n        const eventStart = new Date(event.start)\n        const eventEnd = new Date(event.end)\n\n        // Check if event is on this day\n        return (\n          isSameDay(day, eventStart) ||\n          isSameDay(day, eventEnd) ||\n          (eventStart < day && eventEnd > day)\n        )\n      })\n\n      // Sort events by start time and duration\n      const sortedEvents = [...dayEvents].sort((a, b) => {\n        const aStart = new Date(a.start)\n        const bStart = new Date(b.start)\n        const aEnd = new Date(a.end)\n        const bEnd = new Date(b.end)\n\n        // First sort by start time\n        if (aStart < bStart) return -1\n        if (aStart > bStart) return 1\n\n        // If start times are equal, sort by duration (longer events first)\n        const aDuration = differenceInMinutes(aEnd, aStart)\n        const bDuration = differenceInMinutes(bEnd, bStart)\n        return bDuration - aDuration\n      })\n\n      // Calculate positions for each event\n      const positionedEvents: PositionedEvent[] = []\n      const dayStart = startOfDay(day)\n\n      // Track columns for overlapping events\n      const columns: { event: CalendarEvent; end: Date }[][] = []\n\n      sortedEvents.forEach((event) => {\n        const eventStart = new Date(event.start)\n        const eventEnd = new Date(event.end)\n\n        // Adjust start and end times if they're outside this day\n        const adjustedStart = isSameDay(day, eventStart) ? eventStart : dayStart\n        const adjustedEnd = isSameDay(day, eventEnd)\n          ? eventEnd\n          : addHours(dayStart, 24)\n\n        // Calculate top position and height\n        const startHour =\n          getHours(adjustedStart) + getMinutes(adjustedStart) / 60\n        const endHour = getHours(adjustedEnd) + getMinutes(adjustedEnd) / 60\n\n        // Adjust the top calculation to account for the new start time\n        const top = (startHour - StartHour) * WeekCellsHeight\n        const height = (endHour - startHour) * WeekCellsHeight\n\n        // Find a column for this event\n        let columnIndex = 0\n        let placed = false\n\n        while (!placed) {\n          const col = columns[columnIndex] || []\n          if (col.length === 0) {\n            columns[columnIndex] = col\n            placed = true\n          } else {\n            const overlaps = col.some((c) =>\n              areIntervalsOverlapping(\n                { start: adjustedStart, end: adjustedEnd },\n                {\n                  start: new Date(c.event.start),\n                  end: new Date(c.event.end),\n                }\n              )\n            )\n            if (!overlaps) {\n              placed = true\n            } else {\n              columnIndex++\n            }\n          }\n        }\n\n        // Ensure column is initialized before pushing\n        const currentColumn = columns[columnIndex] || []\n        columns[columnIndex] = currentColumn\n        currentColumn.push({ event, end: adjustedEnd })\n\n        // Calculate width and left position based on number of columns\n        const width = columnIndex === 0 ? 1 : 1 - columnIndex * 0.1\n        const left = columnIndex === 0 ? 0 : columnIndex * 0.1\n\n        positionedEvents.push({\n          event,\n          top,\n          height,\n          left,\n          width,\n          zIndex: 10 + columnIndex, // Higher columns get higher z-index\n        })\n      })\n\n      return positionedEvents\n    })\n\n    return result\n  }, [days, events])\n\n  const handleEventClick = (event: CalendarEvent, e: React.MouseEvent) => {\n    e.stopPropagation()\n    onEventSelect?.(event)\n  }\n\n  const showAllDaySection = allDayEvents.length > 0\n  const { currentTimePosition, currentTimeVisible } = useCurrentTimeIndicator(\n    currentDate,\n    \"week\"\n  )\n\n  return (\n    <div data-slot=\"week-view\" className=\"flex h-full flex-col\">\n      <div className=\"bg-background/80 border-border/70 sticky top-0 z-30 grid grid-cols-8 border-b backdrop-blur-md\">\n        <div className=\"text-muted-foreground/70 py-2 text-center text-sm\">\n          <span className=\"max-[479px]:sr-only\">{format(new Date(), \"O\")}</span>\n        </div>\n        {days.map((day) => (\n          <div\n            key={day.toString()}\n            className=\"data-today:text-foreground text-muted-foreground/70 py-2 text-center text-sm data-today:font-medium\"\n            data-today={isToday(day) || undefined}\n          >\n            <span className=\"sm:hidden\" aria-hidden=\"true\">\n              {format(day, \"E\")[0]} {format(day, \"d\")}\n            </span>\n            <span className=\"max-sm:hidden\">{format(day, \"EEE dd\")}</span>\n          </div>\n        ))}\n      </div>\n\n      {showAllDaySection && (\n        <div className=\"border-border/70 bg-muted/50 border-b\">\n          <div className=\"grid grid-cols-8\">\n            <div className=\"border-border/70 relative border-r\">\n              <span className=\"text-muted-foreground/70 absolute bottom-0 left-0 h-6 w-16 max-w-full pe-2 text-right text-[10px] sm:pe-4 sm:text-xs\">\n                All day\n              </span>\n            </div>\n            {days.map((day, dayIndex) => {\n              const dayAllDayEvents = allDayEvents.filter((event) => {\n                const eventStart = new Date(event.start)\n                const eventEnd = new Date(event.end)\n                return (\n                  isSameDay(day, eventStart) ||\n                  (day > eventStart && day < eventEnd) ||\n                  isSameDay(day, eventEnd)\n                )\n              })\n\n              return (\n                <div\n                  key={day.toString()}\n                  className=\"border-border/70 relative border-r p-1 last:border-r-0\"\n                  data-today={isToday(day) || undefined}\n                >\n                  {dayAllDayEvents.map((event) => {\n                    const eventStart = new Date(event.start)\n                    const eventEnd = new Date(event.end)\n                    const isFirstDay = isSameDay(day, eventStart)\n                    const isLastDay = isSameDay(day, eventEnd)\n\n                    // Check if this is the first day in the current week view\n                    const isFirstVisibleDay =\n                      dayIndex === 0 && isBefore(eventStart, weekStart)\n                    const shouldShowTitle = isFirstDay || isFirstVisibleDay\n\n                    return (\n                      <EventItem\n                        key={`spanning-${event.id}`}\n                        onClick={(e) => handleEventClick(event, e)}\n                        event={event}\n                        view=\"month\"\n                        isFirstDay={isFirstDay}\n                        isLastDay={isLastDay}\n                      >\n                        {/* Show title if it's the first day of the event or the first visible day in the week */}\n                        <div\n                          className={cn(\n                            \"truncate\",\n                            !shouldShowTitle && \"invisible\"\n                          )}\n                          aria-hidden={!shouldShowTitle}\n                        >\n                          {event.title}\n                        </div>\n                      </EventItem>\n                    )\n                  })}\n                </div>\n              )\n            })}\n          </div>\n        </div>\n      )}\n\n      <div className=\"grid flex-1 grid-cols-8 overflow-hidden\">\n        <div className=\"border-border/70 grid auto-cols-fr border-r\">\n          {hours.map((hour, index) => (\n            <div\n              key={hour.toString()}\n              className=\"border-border/70 relative min-h-[var(--week-cells-height)] border-b last:border-b-0\"\n            >\n              {index > 0 && (\n                <span className=\"bg-background text-muted-foreground/70 absolute -top-3 left-0 flex h-6 w-16 max-w-full items-center justify-end pe-2 text-[10px] sm:pe-4 sm:text-xs\">\n                  {format(hour, \"h a\")}\n                </span>\n              )}\n            </div>\n          ))}\n        </div>\n\n        {days.map((day, dayIndex) => (\n          <div\n            key={day.toString()}\n            className=\"border-border/70 relative grid auto-cols-fr border-r last:border-r-0\"\n            data-today={isToday(day) || undefined}\n          >\n            {/* Positioned events */}\n            {(processedDayEvents[dayIndex] ?? []).map((positionedEvent) => (\n              <div\n                key={positionedEvent.event.id}\n                className=\"absolute z-10 px-0.5\"\n                style={{\n                  top: `${positionedEvent.top}px`,\n                  height: `${positionedEvent.height}px`,\n                  left: `${positionedEvent.left * 100}%`,\n                  width: `${positionedEvent.width * 100}%`,\n                  zIndex: positionedEvent.zIndex,\n                }}\n                onClick={(e) => e.stopPropagation()}\n              >\n                <div className=\"h-full w-full\">\n                  <DraggableEvent\n                    event={positionedEvent.event}\n                    view=\"week\"\n                    onClick={(e) => handleEventClick(positionedEvent.event, e)}\n                    showTime\n                    height={positionedEvent.height}\n                  />\n                </div>\n              </div>\n            ))}\n\n            {/* Current time indicator - only show for today's column */}\n            {currentTimeVisible && isToday(day) && (\n              <div\n                className=\"pointer-events-none absolute right-0 left-0 z-20\"\n                style={{ top: `${currentTimePosition}%` }}\n              >\n                <div className=\"relative flex items-center\">\n                  <div className=\"bg-primary absolute -left-1 h-2 w-2 rounded-full\"></div>\n                  <div className=\"bg-primary h-[2px] w-full\"></div>\n                </div>\n              </div>\n            )}\n            {hours.map((hour) => {\n              const hourValue = getHours(hour)\n              return (\n                <div\n                  key={hour.toString()}\n                  className=\"border-border/70 relative min-h-[var(--week-cells-height)] border-b last:border-b-0\"\n                >\n                  {/* Quarter-hour intervals */}\n                  {[0, 1, 2, 3].map((quarter) => {\n                    const quarterHourTime = hourValue + quarter * 0.25\n                    return (\n                      <DroppableCell\n                        key={`${hour.toString()}-${quarter}`}\n                        id={`week-cell-${day.toISOString()}-${quarterHourTime}`}\n                        date={day}\n                        time={quarterHourTime}\n                        className={cn(\n                          \"absolute h-[calc(var(--week-cells-height)/4)] w-full\",\n                          quarter === 0 && \"top-0\",\n                          quarter === 1 &&\n                            \"top-[calc(var(--week-cells-height)/4)]\",\n                          quarter === 2 &&\n                            \"top-[calc(var(--week-cells-height)/4*2)]\",\n                          quarter === 3 &&\n                            \"top-[calc(var(--week-cells-height)/4*3)]\"\n                        )}\n                        onClick={() => {\n                          const startTime = new Date(day)\n                          startTime.setHours(hourValue)\n                          startTime.setMinutes(quarter * 15)\n                          onEventCreate?.(startTime)\n                        }}\n                      />\n                    )\n                  })}\n                </div>\n              )\n            })}\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n","import { useEffect, useMemo, useState } from \"react\";\nimport { RiCalendarCheckLine } from \"@remixicon/react\";\nimport { addDays, addMonths, addWeeks, endOfWeek, format, isSameMonth, startOfWeek, subMonths, subWeeks } from \"date-fns\";\nimport { ChevronDownIcon, ChevronLeftIcon, ChevronRightIcon, PlusIcon } from \"lucide-react\";\n\n\n\nimport { AgendaView } from \"./agenda-view\";\nimport { CalendarDndProvider } from \"./calendar-dnd-context\";\nimport { AgendaDaysToShow, EventGap, EventHeight, WeekCellsHeight } from \"./constants\";\nimport { DayView } from \"./day-view\";\nimport { cn } from \"./lib/utils\";\nimport { MonthView } from \"./month-view\";\nimport { CalendarEvent, CalendarView } from \"./types\";\nimport { Button } from \"./ui/button\";\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuShortcut, DropdownMenuTrigger } from \"./ui/dropdown-menu\";\nimport { WeekView } from \"./week-view\";\n\n\nexport interface EventCalendarProps {\n  events?: CalendarEvent[]\n  onEventAdd?: (event: CalendarEvent) => void\n  onEventUpdate?: (event: CalendarEvent) => void\n  onEventDelete?: (eventId: string) => void\n  onEventSelect?: (event: CalendarEvent) => void\n  onEventCreate?: (startTime: Date) => void\n  onEventDragEnd?: (event: CalendarEvent) => void\n  onEventDragStart?: (event: CalendarEvent) => void\n  onEventDrop?: (event: CalendarEvent) => void\n  onEventResize?: (event: CalendarEvent) => void\n  onEventResizeStart?: (event: CalendarEvent) => void\n  onEventResizeEnd?: (event: CalendarEvent) => void\n  className?: string\n  initialView?: CalendarView\n  showViewSwitcher?: boolean\n  showTodayButton?: boolean\n  showNewEventButton?: boolean\n  eventHeight?: number\n  eventGap?: number\n  weekCellsHeight?: number\n  agendaDaysToShow?: number\n}\n\nexport function EventCalendar({\n  events = [],\n  onEventAdd,\n  onEventUpdate,\n  onEventDelete,\n  className,\n  initialView = \"month\",\n  onEventCreate,\n  onEventSelect,\n  showViewSwitcher,\n  showNewEventButton,\n  eventHeight = EventHeight,\n  eventGap = EventGap,\n  weekCellsHeight = WeekCellsHeight,\n  agendaDaysToShow = AgendaDaysToShow,\n}: EventCalendarProps) {\n  const [currentDate, setCurrentDate] = useState(new Date())\n  const [view, setView] = useState<CalendarView>(initialView)\n  // const [isEventDialogOpen, setIsEventDialogOpen] = useState(false)\n  // const [selectedEvent, setSelectedEvent] = useState<CalendarEvent | null>(null)\n\n  // Add keyboard shortcuts for view switching\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Skip if user is typing in an input, textarea or contentEditable element\n      // or if the event dialog is open\n      if (\n        // isEventDialogOpen ||\n        !showViewSwitcher ||\n        e.target instanceof HTMLInputElement ||\n        e.target instanceof HTMLTextAreaElement ||\n        (e.target instanceof HTMLElement && e.target.isContentEditable)\n      ) {\n        return\n      }\n\n      switch (e.key.toLowerCase()) {\n        case \"m\":\n          setView(\"month\")\n          break\n        case \"w\":\n          setView(\"week\")\n          break\n        case \"d\":\n          setView(\"day\")\n          break\n        case \"a\":\n          setView(\"agenda\")\n          break\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown)\n    }\n  }, [\n    /* isEventDialogOpen */\n    showViewSwitcher,\n  ])\n\n  const handlePrevious = () => {\n    if (view === \"month\") {\n      setCurrentDate(subMonths(currentDate, 1))\n    } else if (view === \"week\") {\n      setCurrentDate(subWeeks(currentDate, 1))\n    } else if (view === \"day\") {\n      setCurrentDate(addDays(currentDate, -1))\n    } else if (view === \"agenda\") {\n      // For agenda view, go back 30 days (a full month)\n      setCurrentDate(addDays(currentDate, -AgendaDaysToShow))\n    }\n  }\n\n  const handleNext = () => {\n    if (view === \"month\") {\n      setCurrentDate(addMonths(currentDate, 1))\n    } else if (view === \"week\") {\n      setCurrentDate(addWeeks(currentDate, 1))\n    } else if (view === \"day\") {\n      setCurrentDate(addDays(currentDate, 1))\n    } else if (view === \"agenda\") {\n      // For agenda view, go forward 30 days (a full month)\n      setCurrentDate(addDays(currentDate, AgendaDaysToShow))\n    }\n  }\n\n  const handleToday = () => {\n    setCurrentDate(new Date())\n  }\n\n  const handleEventUpdate = (updatedEvent: CalendarEvent) => {\n    onEventUpdate?.(updatedEvent)\n\n    // // Show toast notification when an event is updated via drag and drop\n    // toast(`Event \"${updatedEvent.title}\" moved`, {\n    //   description: format(new Date(updatedEvent.start), \"MMM d, yyyy\"),\n    //   position: \"bottom-left\",rest\n    // })\n  }\n\n  const viewTitle = useMemo(() => {\n    if (view === \"month\") {\n      return format(currentDate, \"MMMM yyyy\")\n    } else if (view === \"week\") {\n      const start = startOfWeek(currentDate, { weekStartsOn: 0 })\n      const end = endOfWeek(currentDate, { weekStartsOn: 0 })\n      if (isSameMonth(start, end)) {\n        return format(start, \"MMMM yyyy\")\n      } else {\n        return `${format(start, \"MMM\")} - ${format(end, \"MMM yyyy\")}`\n      }\n    } else if (view === \"day\") {\n      return (\n        <>\n          <span className=\"min-[480px]:hidden\" aria-hidden=\"true\">\n            {format(currentDate, \"MMM d, yyyy\")}\n          </span>\n          <span className=\"max-[479px]:hidden min-md:hidden\" aria-hidden=\"true\">\n            {format(currentDate, \"MMMM d, yyyy\")}\n          </span>\n          <span className=\"max-md:hidden\">\n            {format(currentDate, \"EEE MMMM d, yyyy\")}\n          </span>\n        </>\n      )\n    } else if (view === \"agenda\") {\n      // Show the month range for agenda view\n      const start = currentDate\n      const end = addDays(currentDate, AgendaDaysToShow - 1)\n\n      if (isSameMonth(start, end)) {\n        return format(start, \"MMMM yyyy\")\n      } else {\n        return `${format(start, \"MMM\")} - ${format(end, \"MMM yyyy\")}`\n      }\n    } else {\n      return format(currentDate, \"MMMM yyyy\")\n    }\n  }, [currentDate, view])\n\n  return (\n    <div\n      className=\"flex flex-col rounded-lg border has-data-[slot=month-view]:flex-1\"\n      style={\n        {\n          \"--event-height\": `${eventHeight}px`,\n          \"--event-gap\": `${eventGap}px`,\n          \"--week-cells-height\": `${weekCellsHeight}px`,\n        } as React.CSSProperties\n      }\n      data-height={eventHeight}\n    >\n      <CalendarDndProvider onEventUpdate={handleEventUpdate}>\n        <div\n          className={cn(\n            \"flex items-center justify-between p-2 sm:p-4\",\n            className\n          )}\n        >\n          <div className=\"flex items-center gap-1 sm:gap-4\">\n            <Button\n              variant=\"outline\"\n              className=\"aspect-square max-[479px]:p-0!\"\n              onClick={handleToday}\n            >\n              <RiCalendarCheckLine\n                className=\"min-[480px]:hidden\"\n                size={16}\n                aria-hidden=\"true\"\n              />\n              <span className=\"max-[479px]:sr-only\">Today</span>\n            </Button>\n            <div className=\"flex items-center sm:gap-2\">\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                onClick={handlePrevious}\n                aria-label=\"Previous\"\n              >\n                <ChevronLeftIcon size={16} aria-hidden=\"true\" />\n              </Button>\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                onClick={handleNext}\n                aria-label=\"Next\"\n              >\n                <ChevronRightIcon size={16} aria-hidden=\"true\" />\n              </Button>\n            </div>\n            <h2 className=\"text-sm font-semibold sm:text-lg md:text-xl\">\n              {viewTitle}\n            </h2>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            {showViewSwitcher && (\n              <DropdownMenu>\n                <DropdownMenuTrigger>\n                  <Button\n                    variant=\"outline\"\n                    className=\"gap-1.5 max-[479px]:h-8\"\n                    asChild\n                  >\n                    <div>\n                      <span>\n                        <span\n                          className=\"visible sm:invisible\"\n                          aria-hidden=\"true\"\n                        >\n                          {view.charAt(0).toUpperCase()}\n                        </span>\n                        <span className=\"invisible sm:visible\">\n                          {view.charAt(0).toUpperCase() + view.slice(1)}\n                        </span>\n                      </span>\n                      <ChevronDownIcon\n                        className=\"-me-1 opacity-60\"\n                        size={16}\n                        aria-hidden=\"true\"\n                      />\n                    </div>\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent align=\"end\" className=\"min-w-32\">\n                  <DropdownMenuItem onClick={() => setView(\"month\")}>\n                    Month <DropdownMenuShortcut>M</DropdownMenuShortcut>\n                  </DropdownMenuItem>\n                  <DropdownMenuItem onClick={() => setView(\"week\")}>\n                    Week <DropdownMenuShortcut>W</DropdownMenuShortcut>\n                  </DropdownMenuItem>\n                  <DropdownMenuItem onClick={() => setView(\"day\")}>\n                    Day <DropdownMenuShortcut>D</DropdownMenuShortcut>\n                  </DropdownMenuItem>\n                  <DropdownMenuItem onClick={() => setView(\"agenda\")}>\n                    Agenda <DropdownMenuShortcut>A</DropdownMenuShortcut>\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n            )}\n            {showNewEventButton && (\n              <Button\n                className=\"aspect-square max-[479px]:p-0!\"\n                onClick={() => {\n                  const startTime = new Date(currentDate)\n                  startTime.setHours(0, 0, 0, 0)\n                  onEventCreate?.(startTime)\n                }}\n              >\n                <PlusIcon\n                  className=\"opacity-60 sm:-ms-1\"\n                  size={16}\n                  aria-hidden=\"true\"\n                />\n                <span className=\"max-sm:sr-only\">New event</span>\n              </Button>\n            )}\n          </div>\n        </div>\n\n        <div className=\"flex flex-1 flex-col\">\n          {view === \"month\" && (\n            <MonthView\n              currentDate={currentDate}\n              events={events}\n              onEventSelect={onEventSelect}\n              onEventCreate={onEventCreate}\n              eventGap={eventGap}\n              eventHeight={eventHeight}\n              showNewEventButton={showNewEventButton}\n            />\n          )}\n          {view === \"week\" && (\n            <WeekView\n              currentDate={currentDate}\n              events={events}\n              onEventSelect={onEventSelect}\n              onEventCreate={onEventCreate}\n            />\n          )}\n          {view === \"day\" && (\n            <DayView\n              currentDate={currentDate}\n              events={events}\n              onEventSelect={onEventSelect}\n              onEventCreate={onEventCreate}\n            />\n          )}\n          {view === \"agenda\" && (\n            <AgendaView\n              currentDate={currentDate}\n              events={events}\n              onEventSelect={onEventSelect}\n            />\n          )}\n        </div>\n      </CalendarDndProvider>\n    </div>\n  )\n}"],"names":["EventHeight","EventGap","WeekCellsHeight","AgendaDaysToShow","StartHour","EndHour","DefaultStartHour","DefaultEndHour","cn","inputs","_i","arguments","length","twMerge","clsx","getEventColorClasses","color","eventColor","getBorderRadiusClasses","isFirstDay","isLastDay","isMultiDayEvent","event","eventStart","Date","start","eventEnd","end","allDay","getDate","getEventsForDay","events","day","filter","isSameDay","sort","a","b","getTime","sortEvents","__spreadArray","aIsMultiDay","bIsMultiDay","getSpanningEventsForDay","getAllEventsForDay","getAgendaEventsForDay","formatTimeWithOptionalMinutes","date","format","getMinutes","toLowerCase","EventWrapper","_a","_b","_c","isDragging","onClick","className","children","currentTime","dndListeners","dndAttributes","onMouseDown","onTouchStart","displayEnd","isEventInPast","isPast","_jsx","__assign","undefined","EventItem","view","showTime","displayStart","useMemo","durationMinutes","differenceInMinutes","getEventTime","concat","_jsxs","title","_Fragment","location","description","AgendaView","currentDate","onEventSelect","days","console","log","toISOString","Array","from","_","i","addDays","handleEventClick","e","stopPropagation","hasEvents","some","RiCalendarEventLine","size","map","dayEvents","isToday","id","toString","CalendarDndContext","createContext","activeEvent","activeId","activeView","eventHeight","isMultiDay","multiDayWidth","dragHandlePosition","useCalendarDnd","useContext","CalendarDndProvider","onEventUpdate","_d","useState","setActiveEvent","_e","setActiveId","_f","setActiveView","_g","setCurrentTime","_h","setEventHeight","_j","setIsMultiDay","_k","setMultiDayWidth","_l","setDragHandlePosition","eventDimensions","useRef","height","sensors","useSensors","useSensor","MouseSensor","activationConstraint","distance","TouchSensor","delay","tolerance","PointerSensor","dndContextId","useId","handleDragStart","active","data","current","error","calendarEvent","eventIsMultiDay","eventMultiDayWidth","eventDragHandlePosition","handleDragOver","over","time","newTime","hours","Math","floor","fractionalHour","minutes","setHours","getHours","getMonth","getFullYear","getSeconds","getMilliseconds","handleDragEnd","Error","activeData","overData","newStart","originalStart","originalEnd","newEnd","addMinutes","hasStartTimeChanged","DndContext","onDragStart","onDragOver","onDragEnd","Provider","value","DragOverlay","adjustScale","dropAnimation","style","width","DraggableEvent","ariaHidden","elementRef","differenceInDays","useDraggable","offsetHeight","attributes","listeners","setNodeRef","transform","handleMouseDown","rect","getBoundingClientRect","x","clientX","left","y","clientY","top","ref","CSS","Translate","handleTouchStart","touch","touches","node","DroppableCell","useDroppable","isOver","formattedTime","round","padStart","useCurrentTimeIndicator","currentTimePosition","setCurrentTimePosition","currentTimeVisible","setCurrentTimeVisible","useEffect","calculateTimePosition","now","totalMinutes","dayStartMinutes","dayEndMinutes","position","isCurrentTimeVisible","startOfWeekDate","startOfWeek","weekStartsOn","endOfWeekDate","endOfWeek","isWithinInterval","interval","setInterval","clearInterval","DayView","onEventCreate","dayStart","startOfDay","eachHourOfInterval","addHours","allDayEvents","timeEvents","positionedEvents","result","sortedEvents","aStart","bStart","aEnd","bEnd","aDuration","bDuration","columns","forEach","adjustedStart","adjustedEnd","startHour","endHour","columnIndex","placed","col","overlaps","c","areIntervalsOverlapping","currentColumn","push","zIndex","showAllDaySection","hour","index","positionedEvent","hourValue","quarter","quarterHourTime","startTime","setMinutes","useEventVisibility","eventGap","contentRef","observerRef","contentHeight","setContentHeight","useLayoutEffect","updateHeight","clientHeight","ResizeObserver","observe","disconnect","getVisibleEventCount","totalEvents","maxEvents","Popover","props","__rest","PopoverPrimitive","Root","PopoverTrigger","Trigger","PopoverContent","align","sideOffset","showArrow","Portal","Content","Arrow","MonthView","showNewEventButton","monthStart","startOfMonth","monthEnd","endOfMonth","calendarStart","calendarEnd","eachDayOfInterval","weekdays","weeks","week","isMounted","setIsMounted","weekIndex","dayIndex","spanningEvents","isCurrentMonth","isSameMonth","cellId","allEvents","isReferenceCell","visibleCount","hasMore","remainingCount","isHidden","slice","modal","asChild","buttonVariants","cva","variants","variant","default","destructive","outline","secondary","ghost","link","sm","lg","icon","defaultVariants","Button","Comp","Slot","DropdownMenu","DropdownMenuPrimitive","DropdownMenuTrigger","DropdownMenuContent","onPointerDown","onPointerDownOutside","onCloseAutoFocus","isCloseFromMouse","React","handlePointerDown","useCallback","handlePointerDownOutside","handleCloseAutoFocus","preventDefault","DropdownMenuItem","inset","Item","DropdownMenuShortcut","WeekView","weekStart","weekEnd","processedDayEvents","dayAllDayEvents","isFirstVisibleDay","isBefore","shouldShowTitle","EventCalendar","onEventAdd","onEventDelete","initialView","showViewSwitcher","weekCellsHeight","agendaDaysToShow","setCurrentDate","setView","handleKeyDown","target","HTMLInputElement","HTMLTextAreaElement","HTMLElement","isContentEditable","key","window","addEventListener","removeEventListener","handlePrevious","subMonths","subWeeks","handleNext","addMonths","addWeeks","handleToday","handleEventUpdate","updatedEvent","viewTitle","RiCalendarCheckLine","ChevronLeftIcon","ChevronRightIcon","charAt","toUpperCase","ChevronDownIcon","PlusIcon"],"mappings":"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","x_google_ignoreList":[1,2]}